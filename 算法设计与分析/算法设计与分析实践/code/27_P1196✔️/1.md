``` mermaid
%%{init: {'theme':'base'}}%%
flowchart TD
    A[开始] --> B[初始化并查集]
    B --> C[读取指令 T 次]
    C --> D{判断指令类型: M i j 或 C i j}
    
    D -->|M i j| E[处理合并指令 M]
    D -->|C i j| F[处理查询指令 C]

    E --> G[查找战舰 i 和战舰 j 的父节点]
    G --> H{父节点不同?}
    H -->|是| I[按秩合并，更新父节点和距离]
    H -->|否| J[跳过合并]

    F --> K[查找战舰 i 和战舰 j 的父节点]
    K --> L{父节点相同?}
    L -->|是| M[输出战舰之间的数目]
    L -->|否| N[输出 -1]

    I --> O[返回继续读取下一条指令]
    J --> O
    M --> O
    N --> O

    O --> C
    O --> P[结束]
```

